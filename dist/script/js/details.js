require.config({baseUrl:"https://cdnjs.cloudflare.com/ajax/libs/",paths:{jquery:"jquery/1.12.4/jquery.min",jqcookie:"jquery-cookie/1.4.1/jquery.cookie.min",jqvalidate:"jquery-validate/1.19.0/jquery.validate.min",jqlzload:"jquery.lazyload/1.9.1/jquery.lazyload.min"}}),define("config",function(){}),define("details",["config"],function(){require(["jquery"],function(){$(".details_search").load("search.html"),$(".details_nav").load("nav.html"),$(".tools").load("tools.html .public"),$("#footer").load("footer.html .footer_information"),$(function(){function i(){this.id=window.location.search.substring(1).split("=")[1],this.s_pic=$("#details_sections .pic_show .small_box li a img"),this.mid_pic=$("#details_sections .pic_show .mid_pic img"),this.b_pic=$("#details_sections .pic_show .bf img"),this.title=$("#details_sections .information_box .main h2"),this.arrow=$("#details_sections .pic_show .small_pic > a"),this.price=$("#details_sections .information_box .price_now .dd_price"),this.php()}function s(){this.sub_cart=$("#details_sections .information_box .buy_info .buy_box a:first-child"),this.id=window.location.search.substring(1).split("=")[1],this.num=$("#details_header .tools_nav a i"),this.num1=$("#details_header .h_search .search .cart i"),this.click()}function t(){this.mid_box=$("#details_sections .pic_show .mid_pic"),this.mid_pic=$("#details_sections .pic_show .mid_pic img"),this.sglass=$("#details_sections .pic_show .mid_pic .xf"),this.bglass=$("#details_sections .pic_show .bf"),this.b_pic=$("#details_sections .pic_show .bf img"),this.s_pic=$("#details_sections .pic_show .small_box li a"),this.left=$("#details_sections .pic_show .small_pic .left"),this.right=$("#details_sections .pic_show .small_pic .right"),this.pic_show=$("#details_sections .pic_show"),this.ul=$("#details_sections .pic_show .small_box ul"),this.see_box=$("#details_sections .pic_show .small_box .see_box"),this.s_li=$("body#details .large_box .banner_box li"),this.large_s_pic=$("body#details .large_box .banner_box li img"),this.box=$("body#details .large_box"),this.l_pic=$("body#details .large_box .pic_box img"),this.stop=!0,this.num=0,this.width=this.ul.eq(0).outerWidth(),this.create(),this.over(),this.hover(),this.left_click(),this.right_click(),this.click()}function o(){this.close=$("body#details .large_box .close a"),this.top=$("body#details .large_box .banner_box .top"),this.bottom=$("body#details .large_box .banner_box .bottom"),this.left=$("body#details .large_box .pic_box .left"),this.right=$("body#details .large_box .pic_box .right"),this.s_pic=$("body#details .large_box .banner_box li"),this.move_box=$("body#details .large_box .banner_box .large_see_box .box"),this.ul=$("body#details .large_box .banner_box ul"),this.box=$("body#details .large_box"),this.l_pic=$("body#details .large_box .pic_box img"),this.height=this.ul.eq(0).outerHeight(),this.boxclose(),this.scroll(),this.img_tab(),this.index=0,this.stop=!0}!function(i){require(["jqcookie"],function(){i.cookie("username")&&(i(".welcome .unlogin").hide().siblings().show().children(".user").html(i.cookie("username")),i(".welcome .out").on("click",function(){i.cookie("username",null,{expires:-1}),window.location.reload(!0)}),i.cookie("products")?(i(".tools_nav a i").text(i.cookie("products")),i(".h_search .search .cart i").text(i.cookie("products"))):(i(".tools_nav a i").text(0),i(".h_search .search .cart i").text(0)))})}(jQuery),i.prototype={php:function(){var i=this;$.ajax({url:"http://10.31.155.148/dangdang--/php/details.php",data:{s_id:this.id},dataType:"json"}).done(function(s){i.title[0].childNodes[2].nodeValue=" "+s.title,i.price[0].childNodes[2].nodeValue=" "+s.price;var t=s.urls.split(",");i.mid_pic.attr("src",t[0]),i.b_pic.attr("src",t[0]),i.s_pic.each(function(){var i=$(this).index("#details_sections .pic_show .small_box li a img");$(this).attr("src",t[i-2])})})}},new i,s.prototype={click:function(){var i=this;this.sub_cart.on("click",function(){var s=$("#details_sections .information_box .buy_info .num input").val();require(["jqcookie"],function(){var i=$(".tools_nav a i").text();$(".tools_nav a i").text(+i+ +s),$(".h_search .search .cart i").text(+i+ +s),$.cookie("products",+i+ +s,{expires:10})}),$.ajax({type:"post",url:"http://10.31.155.148/dangdang--/php/cart.php",data:{s_id:i.id,count:s},dataType:"json"})})}},new s,t.prototype={click:function(){var i=this;this.mid_box.on("click",function(){i.box.css("display","block");var s=$(this).children("img").attr("src");i.l_pic.attr("src",s),i.large_s_pic.each(function(){if($(this).attr("src")==s){var t=$(this).index("body#details .large_box .banner_box li img");i.s_li.eq(t).addClass("active").siblings("body#details .large_box .banner_box li").removeClass("active")}})})},create:function(){this.ul.eq(0).clone(!0).appendTo(this.see_box),this.ul.eq(this.ul.size()-1).clone(!0).prependTo(this.see_box),this.see_box.width($("#details_sections .pic_show .small_box ul").size()*this.width),this.see_box.css({position:"absolute",left:-this.width})},move:function(i){var s=i.pageX-this.pic_show[0].offsetLeft-this.sglass.outerWidth()/2,t=i.pageY-this.pic_show[0].offsetTop-this.sglass.outerHeight()/2;s<=0?s=0:s>=this.mid_box[0].offsetWidth-this.sglass.outerWidth()&&(s=this.mid_box[0].offsetWidth-this.sglass.outerWidth()),t<=0?t=0:t>=this.mid_box[0].offsetHeight-this.sglass.outerHeight()&&(t=this.mid_box[0].offsetheight-this.sglass.outerHeight()),this.sglass.css({left:s,top:t}),this.b_pic.css({left:-s*this.bglass.outerHeight()/this.sglass.outerHeight(),top:-t*this.bglass.outerHeight()/this.sglass.outerHeight()})},over:function(){var i=this;this.mid_box.on("mouseover",function(s){i.sglass.css({display:"block"}),i.bglass.css({display:"block"}),$(this).on("mousemove",function(s){i.move(s)})}),this.mid_box.on("mouseout",function(){i.sglass.css({display:"none"}),i.bglass.css({display:"none"})})},hover:function(){var i=this;this.s_pic.hover(function(){i.b_pic.attr("src",$(this).children("img").attr("src")),i.mid_pic.attr("src",$(this).children("img").attr("src"))},function(){})},left_click:function(){var i=this;this.left.on("click",function(){i.stop&&(i.num--,i.stop=!1,i.tab())})},right_click:function(){var i=this;this.right.on("click",function(){i.stop&&(i.num++,i.stop=!1,i.tab())})},tab:function(){var i=this;this.see_box.animate({left:-(this.num+1)*this.width},200,function(){i.position(),i.stop=!0})},position:function(i){this.num<0?this.num=this.ul.size()-1:this.num>this.ul.size()-1&&(this.num=0),this.see_box.css({left:-(this.num+1)*this.width})}},new t,o.prototype={boxclose:function(){var i=this;this.close.on("click",function(){i.box.css("display","none")})},img_tab:function(){var i=this;this.s_pic.on("mouseover",function(){$src=$(this).children().children("img").attr("src"),$(this).addClass("active").siblings("body#details .large_box .banner_box li").removeClass("active"),i.l_pic.attr("src",$src),i.num=$(this).index(".banner_box li")})},box_position:function(){this.box.css({left:$(window).scrollLeft()+($(window).width()-this.box.outerWidth())/2,top:$(window).scrollTop()+($(window).height()-this.box.outerHeight())/2})},scroll:function(){var i=this;this.box_position(),$(window).on("scroll",function(){i.box_position()}),$(window).on("resize",function(){i.box_position()})}},new o})})});